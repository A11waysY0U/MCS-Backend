**媒体协作管理系统 - 项目文档**

**技术栈**
- 后端：GIN + GORM + PostgreSQL
- Web: VUE + TS
- 桌面端：WinUI3 + .NET
- 移动端：Flutter

**1\. 用户与权限**

- **注册与验证**
    - 仅支持邀请码注册。
    - 邀请码由管理员生成时可设置使用次数与过期时间。
- **权限管理模型**
    - 超级管理员 / 管理员 / 普通用户三级权限。
    - 超级管理员：可修改管理员权限，包含所有权限
    - 管理员：可生成邀请码
    - 普通用户：其他权限
    - 权限具备继承关系（管理员默认包含普通用户权限）。
- **用户组**
    - 用户组作为用户标记（如「摄影组」「设计组」），便于任务分配。
    - 用户可加入多个用户组。

**2\. 媒体文件管理**

- **元信息解析**
    - 自动读取 EXIF、拍摄设备、拍摄时间。
- **标签系统**
    - 标签全局生效，统一管理。
- **版本管理**
    - 使用时间戳作为版本号。
    - 工作流未完成前保留所有历史版本，完成后仅保留最终版本。
- **文件格式支持**
    - 图片：生成 Web 预览图（缩略图）。
    - RAW 文件：存储原始文件，并生成 JPEG 缩略图。
    - 视频：各种格式的视频，生成一个封面图

**3\. 工作流与任务管理**

- **任务分配**
    - 每个任务可指定负责人（唯一）和协作者（多个）。
    - 负责人负责进度推进，协作者负责文件处理与提交。
    - 管理员和任务负责人可修改任务成员。
- **工作流媒体区**
    - 每个工作流有专属文件存储区。
    - 支持文件夹、标签分类。
- **任务暂存区**
    - 每个任务有专属暂存区，成员可拉取文件处理并上传。
    - 提交以「整个暂存区」为单位，形成版本链路（原始 → 修改 → 最终）。
- **状态流转**
    - 固定流程：待处理 → 进行中 → 待审核（可选） → 完成。
    - 是否需要审核由任务创建时决定。
    - 同一工作流中可有多个任务同时进行。
    - 每次流转记录操作日志（时间、操作者、备注）。
- **通知机制**
    - 系统内通知，客户端刷新时获取最新消息。

**4\. 上传与下载**

- **上传**
    - 支持大文件分片上传、断点续传、秒传。
    - 秒传基于 MD5 校验。
- **下载**
    - 支持批量打包下载（ZIP）。
    - 协作者可下载所在工作流中的所有文件。

**5\. 分类与搜索**

- **分类方式**
    - 文件夹 + 标签双维度分类。
- **搜索**
    - 提供全文搜索（标题、标签、上传者、EXIF 元数据）。
- **收藏**
    - 用户可收藏文件夹或文件，便于快速访问。

**6\. 协作支持**

- **批注**
    - 文件提交时可附带批注（文本说明）。

**7\. 日志与统计**

- **操作日志**
    - 记录上传、下载、删除、任务流转等操作。
- **统计功能**
    - 统计存储占用情况、活跃用户数、文件下载次数。
    - 支持按时间段（本周、本月、季度）查询。
    - 提供可视化报表（图表仪表盘）。